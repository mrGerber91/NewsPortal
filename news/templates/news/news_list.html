{% extends 'flatpages/default.html' %}
{% load static %}
{% load my_filters %}

{% block content %}

    <style>
    header {
      background-image: url('{% static 'news/images/header.jpg' %}');
      background-size: cover;
      background-position: center;
    }
  </style>

    <h2>Все новости ({{ posts|length }})</h2>
    <ul>
        {% for post in posts %}
            <li>
                <h3><a href="{% url 'post_detail' post_id=post.id %}">{{ post.title|censor }}</a></h3>
                <p>Дата публикации: {{ post.created_at|date:"d.m.Y" }}</p>
                <p>{{ post.content|censor|truncatewords:20 }}</p>
                <p>Автор: {{ post.author }}</p>
            </li>
        {% endfor %}
    </ul>
{% endblock %}